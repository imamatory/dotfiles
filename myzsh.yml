---

- hosts: localhost

  vars:
    myzsh: "alias myzsh='docker run --net host -it --rm \
            -e SSH_AUTH_SOCK=/ssh-agent
            -v /tmp:/tmp \
            -v $SSH_AUTH_SOCK:/ssh-agent \
            -v ~/.bash_history:/home/.bash_history \
            -v $HOME/myzsh/backups:/root/.vim/backups \
            -v $(pwd):/app \
            -w /app imamatory/dotfiles'"

  tasks:

    - lineinfile:
        dest: /host/home/.bashrc
        line: "{{ myzsh }}"
        regexp: "myzsh"
        state: present
